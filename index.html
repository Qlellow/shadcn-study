<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>shadcn</title>
    <script>
      (function() {
        // localStorage에서 저장된 테마 읽기 (가장 빠르게)
        const stored = localStorage.getItem('theme');
        let theme = 'dark';
        
        if (stored === 'dark' || stored === 'light') {
          theme = stored;
        } else {
          // 시스템 설정 확인
          if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
            theme = 'dark';
          } else {
            theme = 'dark'; // defaultTheme
          }
        }
        
        // 즉시 테마 클래스 적용 (CSS가 배경색 처리)
        document.documentElement.classList.add(theme);
        
        // 배경색 즉시 설정 (FOUC 완전 방지)
        const bgColor = theme === 'dark' ? '#0a0a0a' : '#ffffff';
        document.documentElement.style.backgroundColor = bgColor;
        
        // body가 있으면 즉시 설정, 없으면 DOMContentLoaded에서 설정
        if (document.body) {
          document.body.style.backgroundColor = bgColor;
        } else {
          document.addEventListener('DOMContentLoaded', function() {
            document.body.style.backgroundColor = bgColor;
          });
        }
        
        // 테마 로드 완료 표시 (CSS transition 활성화)
        document.documentElement.classList.add('theme-loaded');
      })();
    </script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
